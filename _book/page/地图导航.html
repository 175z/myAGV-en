
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>2 myAGV - Map navigation · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="手柄控制.html" />
    
    
    <link rel="prev" href="小车建图.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Introduce</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="en介绍.html">
            
                <a href="en介绍.html">
            
                    
                    1 myAGV - Product introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="初次使用.html">
            
                <a href="初次使用.html">
            
                    
                    2 myAGV - Quick start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="小车建图.html">
            
                <a href="小车建图.html">
            
                    
                    1 myAGV - Mapping
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5" data-path="地图导航.html">
            
                <a href="地图导航.html">
            
                    
                    2 myAGV - Map navigation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="手柄控制.html">
            
                <a href="手柄控制.html">
            
                    
                    3 myAGV - Handle control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="屏幕.html">
            
                <a href="屏幕.html">
            
                    
                    4 myAGV - Connection screen
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Compound robot</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="定位.html">
            
                <a href="定位.html">
            
                    
                    1 myAGV - Camera precise positioning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="机械臂.html">
            
                <a href="机械臂.html">
            
                    
                    2 myAGV - Manipulator connection
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >2 myAGV - Map navigation</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="myagv-map-navigation">myAGV map navigation</h1>
<p>Previously we had built a space map and obtained two map files, map.pgm and map.yaml under the home directory.</p>
<p><img src="../image/&#x5C0F;&#x8F66;&#x5EFA;&#x56FE;/&#x5BB6;&#x76EE;&#x5F55;&#x5730;&#x56FE;&#x6587;&#x4EF6;.png" alt="&#x5730;&#x56FE;&#x6587;&#x4EF6;"></p>
<p> Now let&apos;s look at how to use the established map to navigate for myAGV.</p>
<h2 id="1copy-the-map-file-to-the-location-of-the-project-folder">1.Copy the map file to the location of the project folder</h2>
<ol>
<li>Click the File system icon on the desktop to open the file manager and click &quot;ubuntu&quot; to enter / home/ubuntu directory on the right.</li>
<li>You can see that the map we built before is saved under this path, and select these two files.</li>
<li>Right-click and click Copy to copy both files.</li>
</ol>
<p><img src="../image/&#x5C0F;&#x8F66;&#x5730;&#x56FE;&#x5BFC;&#x822A;/&#x6587;&#x4EF6;&#x7BA1;&#x7406;&#x5668;1.png" alt="&#x590D;&#x5236;&#x5730;&#x56FE;1"></p>
<ol>
<li>Click on the File system icon on the desktop to open another file manager to enter the following path and paste the map file you just copied under that path:<blockquote>
<p>/home/ubuntu/Documents/aibot_ws/src/aibot/navigation_demo/maps/</p>
</blockquote>
</li>
</ol>
<p><img src="../image/&#x5C0F;&#x8F66;&#x5730;&#x56FE;&#x5BFC;&#x822A;/&#x6587;&#x4EF6;&#x7BA1;&#x7406;&#x5668;2.png" alt="&#x590D;&#x5236;&#x5730;&#x56FE;2"></p>
<h2 id="2modify-the-launch-file">2.Modify the launch file</h2>
<ol>
<li>Double-click Open Visual Studio Code in the top left corner.</li>
</ol>
<p><img src="../image/&#x5C0F;&#x8F66;&#x5730;&#x56FE;&#x5BFC;&#x822A;/vscode&#x56FE;&#x6807;.png" alt="vscode&#x56FE;&#x6807;"></p>
<ol>
<li>open /home/ubuntu/Documents/aibot_ws/src/aibot/navigation_demo/launch/the myAGV_navigation.launch file under the path.
<img src="../image/&#x5C0F;&#x8F66;&#x5730;&#x56FE;&#x5BFC;&#x822A;/&#x4FEE;&#x6539;launch1.png" alt="&#x4FEE;&#x6539;launch&#x6587;&#x4EF6;1"></li>
<li>replaces the map_office_arm_demo.yaml on line 6 with the filenname map.yaml of our own drawings.
<img src="../image/&#x5C0F;&#x8F66;&#x5730;&#x56FE;&#x5BFC;&#x822A;/&#x4FEE;&#x6539;launch2.png" alt="&#x4FEE;&#x6539;launch&#x6587;&#x4EF6;2">
<img src="../image/&#x5C0F;&#x8F66;&#x5730;&#x56FE;&#x5BFC;&#x822A;/&#x4FEE;&#x6539;launch3.png" alt="&#x4FEE;&#x6539;launch&#x6587;&#x4EF6;3"></li>
<li>Cancel the comment on the penultimate line, select lines 52-54 with the mouse, and press the shortcut keys <kbd>Shift</kbd>+<kbd>/</kbd> to cancel the comment or comment the code segment. This step enables us to open the rviz simulator for map fixed-point navigation when running.
<img src="../image/&#x5C0F;&#x8F66;&#x5730;&#x56FE;&#x5BFC;&#x822A;/&#x4FEE;&#x6539;launch4.png" alt="&#x4FEE;&#x6539;launch&#x6587;&#x4EF6;4">
<img src="../image/&#x5C0F;&#x8F66;&#x5730;&#x56FE;&#x5BFC;&#x822A;/&#x4FEE;&#x6539;launch5.png" alt="&#x4FEE;&#x6539;launch&#x6587;&#x4EF6;5"></li>
<li>Save the modified file and exit (vscode takes up more memory when running. It is recommended to close vscode after modifying the code, otherwise running myAGV system will be very stuck, and vim and other lightweight editors can also be used)<h2 id="3run-the-launch-file">3.Run the launch file</h2>
</li>
<li>Open a console terminal (shortcut key <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>T</kbd>) and enter the following instructions:<pre><code class="lang-bash">roslaunch navigation_demo myAGV_navigetion.launch
</code></pre>
</li>
<li>can see a Rviz simulation window opened in which the map we built and the relative position of the myAGV in the map.
<strong>Note: the initial position of the myAGV needs to be placed in the departure position of the myAGV when we built the map, so that the map and navigation function are used normally.</strong>
<img src="../image/&#x5C0F;&#x8F66;&#x5730;&#x56FE;&#x5BFC;&#x822A;/&#x8FD0;&#x884C;launch1.png" alt="&#x8FD0;&#x884C;launch&#x6587;&#x4EF6;1"></li>
<li>clicks on the top toolbar for the &quot;2D Nav Goal&quot;.
<img src="../image/&#x5C0F;&#x8F66;&#x5730;&#x56FE;&#x5BFC;&#x822A;/&#x8FD0;&#x884C;launch2.png" alt="&#x8FD0;&#x884C;launch&#x6587;&#x4EF6;2"></li>
<li>Click on the point we want to reach on the map, and the myAGV will start toward the target point, and you can also see a planned path of the myAGV between the starting point to the target point.
<img src="../image/&#x5C0F;&#x8F66;&#x5730;&#x56FE;&#x5BFC;&#x822A;/&#x8FD0;&#x884C;launch3.png" alt="&#x8FD0;&#x884C;launch&#x6587;&#x4EF6;3"></li>
<li>The trolley reaches the target point, movement of space can also be seen in the Rviz interface and &quot;Goal reached&quot; is displayed in the terminal.
<img src="../image/&#x5C0F;&#x8F66;&#x5730;&#x56FE;&#x5BFC;&#x822A;/&#x8FD0;&#x884C;launch4.png" alt="&#x8FD0;&#x884C;launch&#x6587;&#x4EF6;4">
<img src="../image/&#x5C0F;&#x8F66;&#x5730;&#x56FE;&#x5BFC;&#x822A;/&#x8FD0;&#x884C;launch5.png" alt="&#x8FD0;&#x884C;launch&#x6587;&#x4EF6;5"></li>
</ol>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="小车建图.html" class="navigation navigation-prev " aria-label="Previous page: 1 myAGV - Mapping">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="手柄控制.html" class="navigation navigation-next " aria-label="Next page: 3 myAGV - Handle control">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"2 myAGV - Map navigation","level":"1.5","depth":1,"next":{"title":"3 myAGV - Handle control","level":"1.6","depth":1,"path":"page/手柄控制.md","ref":"page/手柄控制.md","articles":[]},"previous":{"title":"1 myAGV - Mapping","level":"1.4","depth":1,"path":"page/小车建图.md","ref":"page/小车建图.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"page/地图导航.md","mtime":"2021-07-27T13:36:16.451Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-07-27T13:39:58.285Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

