
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>1 myAGV - Mapping · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="地图导航.html" />
    
    
    <link rel="prev" href="初次使用.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Introduce</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="en介绍.html">
            
                <a href="en介绍.html">
            
                    
                    1 myAGV - Product introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="初次使用.html">
            
                <a href="初次使用.html">
            
                    
                    2 myAGV - Quick start
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4" data-path="小车建图.html">
            
                <a href="小车建图.html">
            
                    
                    1 myAGV - Mapping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="地图导航.html">
            
                <a href="地图导航.html">
            
                    
                    2 myAGV - Map navigation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="手柄控制.html">
            
                <a href="手柄控制.html">
            
                    
                    3 myAGV - Handle control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="屏幕.html">
            
                <a href="屏幕.html">
            
                    
                    4 myAGV - Connection screen
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Compound robot</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="定位.html">
            
                <a href="定位.html">
            
                    
                    1 myAGV - Camera precise positioning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="机械臂.html">
            
                <a href="机械臂.html">
            
                    
                    2 myAGV - Manipulator connection
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >1 myAGV - Mapping</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="myagv-mapping">myAGV mapping</h1>
<h2 id="1open-the-slam-laser-scan-launch-file">1.Open the slam laser scan launch file</h2>
<p>After opening the trolley, open the console terminal (shortcut <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>T</kbd>) and enter the following instructions on the command line:</p>
<pre><code class="lang-bash">roslaunch navigation_demo myAGV_slam.launch
</code></pre>
<p><strong><em>Note: before starting the launch file, please place myAGV at a suitable starting point in the environment where mapping is required, because opening the launch file will start myAGV&apos;s IMU sensor and Odom odometer, and artificially moving myAGV will cause myAGV mapping distortion.</em></strong></p>
<p>Open the launch file required for myAGV slam laser scanning, if displayed.</p>
<blockquote>
<p>First IMU message received.</p>
</blockquote>
<p>It indicates that the myAGV drawing file is opened successfully, and the display status in the terminal is as follows:</p>
<p><img src="../image/&#x5C0F;&#x8F66;&#x5EFA;&#x56FE;/&#x5EFA;&#x56FE;&#x7EC8;&#x7AEF;.png" alt="&#x5EFA;&#x56FE;&#x6587;&#x4EF6;&#x6210;&#x529F;&#x6253;&#x5F00;"></p>
<p>A Rviz simulation environment also opens, with red myAGV visible in the Rviz and arrows.
<img src="../image/&#x5C0F;&#x8F66;&#x5EFA;&#x56FE;/&#x5EFA;&#x56FE;rviz.png" alt="&#x5EFA;&#x56FE;Rviz">
<strong><em>Note If the Rviz simulation cannot open, you can see if the bottom 2-4 rows of the myAGV_slam.launch file are commented and if only uncommented.</em></strong></p>
<h2 id="2open-the-keyboard-control-file-teleoptwistkeyboardpy">2.Open the keyboard control file teleop_twist_keyboard.py</h2>
<p>Reopen a console terminal and enter in the terminal command line:</p>
<pre><code class="lang-bash">rosrun teleop_twist_keyboard teleop_twist_keyboard.py
</code></pre>
<p><img src="../image/&#x5C0F;&#x8F66;&#x5EFA;&#x56FE;/&#x952E;&#x76D8;&#x63A7;&#x5236;&#x7EC8;&#x7AEF;.png" alt="&#x952E;&#x76D8;&#x63A7;&#x5236;&#x7EC8;&#x7AEF;">
<strong>Direction key&#xFF1A;</strong>
Press the    | Direction
-------- | -----
i  | forward
&#xFF0C;  | back off
j | Right rotation
l | Left rotation
u|Left forward
o|right forward
m|left back
.|right back </p>
<p><strong>Acceleration and deceleration&#xFF1A;</strong></p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>q/z</td>
<td>linear speed and angular speed plus / minus 10%</td>
</tr>
<tr>
<td>w/x</td>
<td>linear speed plus / minus 10%</td>
</tr>
<tr>
<td>e/c</td>
<td>acceleration / deceleration of angular velocity 10%</td>
</tr>
</tbody>
</table>
<h2 id="3start-the-drawing">3.Start the drawing</h2>
<p>Now myAGV can start to move under the control of the keyboard. Control myAGV to turn around in the space required for drawing. At the same time, we can see that in the rviz space, our map will be built little by little with the movement of myAGV&#xFF08; It is suggested to use the &apos;Z&apos; key on the keyboard to reduce the travel speed of myAGV, which is helpful to obtain a more accurate map when building a map)
<strong><em>Note: when operating myAGV with the keyboard, make sure to run teleop<em> twist</em> The terminal of keyboard.py is the currently selected window, otherwise the keyboard control program cannot recognize the keys of the keyboard.</em></strong>
<img src="../image/&#x5C0F;&#x8F66;&#x5EFA;&#x56FE;/&#x5EFA;&#x56FE;&#x8F68;&#x8FF9;rviz.png" alt="&#x5EFA;&#x56FE;&#x8F68;&#x8FF9;Rviz"></p>
<h2 id="4save-the-built-map">4.Save the built map</h2>
<p>Open a new console terminal and enter the following command in the command line to save the map scanned by myAGV:</p>
<pre><code class="lang-c">rosrun map_server map_saver
</code></pre>
<p>After a successful operation, the terminal appears as follows:</p>
<p><img src="../image/&#x5C0F;&#x8F66;&#x5EFA;&#x56FE;/&#x5730;&#x56FE;&#x6587;&#x4EF6;.png" alt="&#x5730;&#x56FE;&#x6587;&#x4EF6;"></p>
<p>You can see here that we drew a red circle, just two files generated after the map was saved, map.pgm and map.yaml. Both files are saved in the home directory by default. Entering <strong>cd</strong> within the same terminal will go to our home directory, and then entering <strong>ls</strong> can see that the map file generated under the home directory has been generated.
<img src="../image/&#x5C0F;&#x8F66;&#x5EFA;&#x56FE;/&#x5BB6;&#x76EE;&#x5F55;&#x5730;&#x56FE;&#x6587;&#x4EF6;.png" alt="&#x5BB6;&#x76EE;&#x5F55;&#x5730;&#x56FE;&#x6587;&#x4EF6;"></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="初次使用.html" class="navigation navigation-prev " aria-label="Previous page: 2 myAGV - Quick start">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="地图导航.html" class="navigation navigation-next " aria-label="Next page: 2 myAGV - Map navigation">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"1 myAGV - Mapping","level":"1.4","depth":1,"next":{"title":"2 myAGV - Map navigation","level":"1.5","depth":1,"path":"page/地图导航.md","ref":"page/地图导航.md","articles":[]},"previous":{"title":"2 myAGV - Quick start","level":"1.3","depth":1,"path":"page/初次使用.md","ref":"page/初次使用.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"page/小车建图.md","mtime":"2021-07-27T13:36:16.451Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-07-27T13:39:58.285Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

